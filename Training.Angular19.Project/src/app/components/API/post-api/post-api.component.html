
<hr />
<div class="row">
  <div class="col-12 text-center">
    <app-tabs [tabList]="['CarList','NewCar','Put','Delete']" (onTabClicked)="onTabChange($event)">

    </app-tabs> 
  </div>
  Current Tab Name: {{currentTab}}
</div>
<div class="row">
  <div class="col- text-center">
    <h2>POST API Integration using Template Form</h2>
  </div>
  <div class="col-4 text-center">
    <button class="btn btn-success" (click)="getAllCars()">Load Cars</button>
  </div>
</div>

<div class="row pt-2">
  @if(currentTab == "CarList" || currentTab == "")
  {
  <div class="col-7 text-center">
    <div class="card">
      <div class="car-header bg-warning">
        <h5 class="text-center">Car List</h5>
      </div>
      <div class="car-body">
        <table class="table table-bordered">
          <thead>
          <th>Reg No.</th>
          <th>Brand Name</th>
          <th>Model Name</th>
          <th>Req No</th>
          <th>Daily Rate</th>
          <th>Image</th>
          <th>Action</th>
          </thead>
          <tbody>
            @for (car of carList; track $index) {
            <tr>
              <td>{{$index+1}}</td>
              <td>{{car.brand}}</td>
              <td>{{car.model}}</td>
              <td>{{car.regNo}}</td>
              <td>{{car.dailyRate}}</td>
              <td class="text-center"><img class="rounded-circle" [src]="car.carImage" width="60px" height="60px" /></td>
              <td>
                <button class="btn btn-success" (click)="onEdit(car)">Edit</button> <span class="ms-3"></span>
                <button class="btn btn-danger" (click)="onDelete(car.carId)">Delete</button>
              </td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>
  }
  @else {
  <div class="col-5 text-center">
    <div class="card">
      <div class="car-header bg-warning">
        <h5>Create New Car</h5>
      </div>
      <div class="car-body">
        <div class="row">
          <div class="col-6 mt-2">
            <label>Reg No</label>
            <input type="text" [(ngModel)]="carObj.regNo" class="form-control" placeholder="Enter the Registration Number" name="" id="">
          </div>
          <div class="col-6 mt-2">
            <label>Brand Name</label>
            <input type="text" [(ngModel)]="carObj.brand" class="form-control" placeholder="Enter the Brand Name" name="" id="">
          </div>
          <div class="col-6 mt-2">
            <label>Model Name</label>
            <input type="text" [(ngModel)]="carObj.model" class="form-control" placeholder="Enter the Model Name" name="" id="">
          </div>
          <div class="col-6 mt-2">
            <label>Year</label>
            <input type="text" [(ngModel)]="carObj.year" class="form-control" placeholder="Enter the Year of Manufacturer" name="" id="">
          </div>
          <div class="col-6 mt-2">
            <label>Color</label>
            <input type="text" [(ngModel)]="carObj.color" class="form-control" placeholder="Enter the Color" name="" id="">
          </div>
          <div class="col-6 mt-2">
            <label>DailyRate</label>
            <input type="text" [(ngModel)]="carObj.dailyRate" class="form-control" placeholder="Enter the Brand Name" name="" id="">
          </div>
          <div class="col-6 mt-2">
            <label>Car Image</label>
            <input type="text" [(ngModel)]="carObj.carImage" class="form-control" placeholder="Enter the Brand Name" name="" id="">
          </div>
        </div>

      </div>
      <div class="row">
        <div class="col-12 mt-2 text-center">
          <button class="btn btn-secondary m-2" (click)="clearForm()">Reset Form</button>
          @if(carObj.carId == 0)
          {
          <button class="btn btn-success m-2" (click)="onSaveCar()">Save Car</button>
          }
          @else
          {
          <button class="btn btn-warning m-2" (click)="onUpdateCar()">Update Car</button>
          }
        </div>
      </div>
    </div>
  </div>
  }
</div>


